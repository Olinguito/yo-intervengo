template
  import(from="app/elements/marker/yi-marker")
  import(from="app/elements/card/yi-card")
  import(from="app/elements/selector/yi-selector")
  import(from="app/elements/selector/yi-button")

  section#map-area
    core-toolbar
      yi-icon-button(icon="menu")
      yi-icon-button(icon="search")


    leaflet-map(
    latitude.bind="map.lat",
    longitude.bind="map.lng",
    tileServer.bind="mapConf.tiles",
    zoom.bind="map.zoom",
    options.bind="mapConf",
    tileserver.bind="mapConf.tiles"
    )
      yi-marker(
      marker,
      latitude.one-time="map.lat",
      longitude.one-time="map.lng",
      click.trigger="mrk.toggleType()",
      ref.view-model="mrk"
      )

    core-toolbar.bottom
      yi-icon-button(icon="map-center")
      //- create report
      yi-selector(icon="add")
        yi-button(title.bind="type.name", class="${type.name}", repeat.for="type of cats")
          yi-button(title.bind="cat.name", class="${$parent.type.name}", repeat.for="cat of type.categories")
            yi-button(title.bind="subcat.name", class="${$parent.$parent.type.name}", repeat.for="subcat of cat.categories")

  //- sub routes(search, detail)
  router-view(id="${activeSubSection}")

  yi-card-list
    yi-card(repeat.for="report of reports", report.bind="report")
