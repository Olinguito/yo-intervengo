template
  require(from="yi/elements/card/yi-card")
  require(from="./search-filter")

  section#map-area
    core-toolbar
      yi-icon-button(icon="menu")
      yi-icon-button(icon="search")

    leaflet-map(
      latitude.bind="map.center.lat",
      longitude.bind="map.center.lng",
      zoom.bind="map.zoom",
      options.bind="mapConf",
      tileserver.bind="mapConf.tiles"
    )
      //- leaflet-marker( latitude.one-time="map.center.lat", longitude.one-time="map.center.lng", icon="{'iconUrl':'assets/yi-marker-complain.png'}" )
      yi-marker(
        marker,
        repeat.for="report of reports | search:query"
        latitude.bind="report.location.lat",
        longitude.bind="report.location.lng",
        icon.bind="report.category.icon",
        class="${report.typeText == 'request'?'alt':''}"
      )

  router-view(id="${activeSubSection}")

  yi-card-list
    yi-card(repeat.for="report of reports | search:query", report.bind="report")
